#!/usr/bin/env zsh

#
# Author: Steven Spasbo
#
# Next to load is ~/.zlogin

# Path to your oh-my-zsh installation.
export ZSH=$HOME/.oh-my-zsh
export SHELL=zsh
export ZSH_CUSTOM=$HOME/.zsh-custom

#ZSH_THEME="nick"
ZSH_THEME="agnoster"

DISABLE_AUTO_UPDATE="true"
ENABLE_CORRECTION="true"
COMPLETION_WAITING_DOTS="true"

plugins=(colored-man common-aliases)
[[ -s $ZSH_CUSTOM/plugins/zsh-syntax-highlighting ]] && plugins+=(zsh-syntax-highlighting)
# Check for executables
for p (git tmux vagrant grunt composer); do
  if type $p > /dev/null; then
    plugins+=($p)
  fi
done

source $ZSH/oh-my-zsh.sh

# Check `zshoptions` man page for more values
setopt AUTO_PUSHD
setopt CDABLE_VARS
setopt CHASE_LINKS # chase symlinks, opposite of CHASE_DOTS
setopt GLOB_DOTS # emacs zsh [tab] [tab] -> .zshrc .zprofile .z[a-z]+
setopt AUTO_LIST # Automatically expand menu
setopt PUSHD_TO_HOME
setopt PUSHD_SILENT
setopt PUSHD_IGNORE_DUPS # Remove duplicate entries
setopt PUSHD_MINUS # This reverts the +/- operators.
setopt COMPLETE_ALIASES
setopt NO_MENU_COMPLETE
setopt IGNOREEOF # Don't kill session with ctrl+D

# Load all custom zsh configurations, ignoring temp files.
if [[ -d ~/.zsh-custom/config ]]; then
  for f in $(ls ~/.zsh-custom/config/[^.#]*.zsh); do
    source $f
  done
fi


autoload zmv # Move files using glob, Ex: zmv '(*).lis' '$1.txt'
autoload run-help # Open man pages with `command <esc-h>`


zmodload -a zsh/stat stat
zmodload -a zsh/zpty zpty
zmodload -a zsh/zprof zprof
zmodload -ap zsh/mapfile mapfile


autoload -U zsh-mime-setup # Set file suffixes.
zsh-mime-setup
if command -v vlc > /dev/null; then
  alias -s mp4=vlc
  alias -s py=emacs
fi

# Global aliases
alias -g G=' | grep -i'
alias -g L=' | less'

# Finally
[[ -s $HOME/.exports ]] && . $HOME/.exports
[[ -s $HOME/.aliases ]] && . $HOME/.aliases

autoload -U tetriscurses # Slacker
