#!/usr/bin/env zsh

#
# Author: Steven Spasbo
#
# Next to load is ~/.zlogin

# Path to your oh-my-zsh installation.
export ZSH=$HOME/.oh-my-zsh
export SHELL=zsh
export ZSH_CUSTOM=$HOME/.zsh-custom

#ZSH_THEME="nick"
ZSH_THEME="agnoster"

DISABLE_AUTO_UPDATE="true"
ENABLE_CORRECTION="true"
COMPLETION_WAITING_DOTS="true"

plugins=(colored-man common-aliases)
[[ -s $ZSH_CUSTOM/plugins/zsh-syntax-highlighting ]] && plugins+=(zsh-syntax-highlighting)
# Check for executables
for p (git tmux vagrant grunt composer); do
  if type $p > /dev/null; then
    plugins+=($p)
  fi
done

source $ZSH/oh-my-zsh.sh

# Override oh-my-zsh

# Set some opts
setopt auto_pushd
setopt cdable_vars
setopt chase_links # chase symlinks
setopt glob_dots # emacs zsh [tab] [tab] -> .zshrc .zprofile .z[a-z]+
setopt AUTO_LIST # Automatically expand menu
setopt PUSHD_TO_HOME
setopt PUSHD_SILENT
setopt PUSHD_IGNORE_DUPS # Remove duplicate entries
setopt PUSHD_MINUS # This reverts the +/- operators.
setopt COMPLETE_ALIASES
unsetopt MENU_COMPLETE

#   zmv [OPTIONS] oldpattern newpattern
# where oldpattern contains parenthesis surrounding patterns which will
# be replaced in turn by $1, $2, ... in newpattern.  For example,
#   zmv '(*).lis' '$1.txt'
autoload zmv

# Set file types
autoload -U zsh-mime-setup
zsh-mime-setup


autoload -Uz chpwd_recent_dirs cdr add-zsh-hook
add-zsh-hook chpwd chpwd_recent_dirs

zstyle ':chpwd:*' recent-dirs-file "$HOME/.dirs"

if [[ -d ~/.zsh-custom/config ]]; then
  for f in $(ls ~/.zsh-custom/config/*.zsh); do
    source $f
  done
fi

# Aliases
alias -g gp=' | grep -i'
alias -g l=' | less'

# Finally
[[ -s $HOME/.exports ]] && . $HOME/.exports
[[ -s $HOME/.aliases ]] && . $HOME/.aliases
